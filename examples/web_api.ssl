// Web API Consumer
// Demonstrates HTTP client, JSON parsing, and file I/O

fn main() {
    print("ğŸŒ Web API Consumer Demo")
    print("=========================\n")
    
    try {
        // Fetch user data from GitHub API
        print("ğŸ“¡ Fetching data from GitHub API...")
        let response = http_get("https://api.github.com/users/github")
        
        // Parse JSON response
        let data = json_parse(response)
        print("âœ… Data received!\n")
        
        // Display some fields (Map access would be: data["login"])
        print("ğŸ“Š User Data (raw):")
        print(data)
        
        // Save to file
        print("\nğŸ’¾ Saving to file...")
        fs_write("github_user.json", json_stringify(data))
        print("âœ… Saved to github_user.json")
        
        // Verify file exists
        if fs_exists("github_user.json") {
            print("âœ… File verified!")
            
            // Read it back
            let saved = fs_read("github_user.json")
            print("\nğŸ“‚ File contents (first 100 chars):")
            // print(saved[0..100])  // String slicing not yet implemented
            print("(Full JSON saved successfully)")
        }
        
        print("\nğŸ‰ Demo completed successfully!")
        
    } recover (err) {
        print("âŒ Error occurred:", err)
        print("   Make sure you have an internet connection.")
    }
}
