// Distributed Computing Demo
// Demonstrates remote execution with spawn on

fn compute_task(id: Int) -> Int {
    print("  [Task", id, "] Computing...")
    let result = id * id
    print("  [Task", id, "] Result:", result)
    return result
}

fn main() {
    print("ğŸŒ Distributed Computing Demo")
print("===============================\n")
    
    print("Note: For remote execution, run ssld on target machines")
    print("Example: spawn on \"localhost:8080\" { ... }\n")
    
    // Local parallel execution
    print("ğŸ“Š Running tasks in parallel locally:\n")
    
    let chan1 = channel()
    let chan2 = channel()
    let chan3 = channel()
    
    spawn {
        send(chan1[0], compute_task(1))
    }
    
    spawn {
        send(chan2[0], compute_task(2))
    }
    
    spawn {
        send(chan3[0], compute_task(3))
    }
    
    // Collect results
    let r1 = recv(chan1[1])
    let r2 = recv(chan2[1])
    let r3 = recv(chan3[1])
    
    let total = r1 + r2 + r3
    
    print("\nâœ… All tasks completed!")
    print("ğŸ“ˆ Combined result:", total)
    
    // Uncomment for remote execution (requires ssld running)
    // spawn on "localhost:8080" {
    //     print("Running on remote machine!")
    //     let result = compute_task(99)
    // }
}
